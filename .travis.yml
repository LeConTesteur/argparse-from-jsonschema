language: python
cache: pip
python:
  - '3.6'
install:
  - pip install flake8 pytest pytest-cov codecov -U
script:
  - python -m flake8
  - python -m pytest --cov=argparse_schema
  - python setup.py install
  - argparse-schema tests/argument_config.json
after_success:
  - codecov --token=526952af-b40a-43f2-aeb6-9b0277eb0223
deploy:
  provider: pypi
  user: LeConTesteur
  on:
    branch: master
  skip_existing: true
  password: PYPI_API_KEYS
